<div class="page" data-name="preference">
    <div class="navbar">
        <div class="navbar-inner sliding">
            <div class="left">
                <a href="#" class="link back">
                    <i class="icon icon-back"></i>
                    <span class="ios-only">Back</span>
                </a>
            </div>
            <div class="title">OP2A Mobile - Préférences</div>
        </div>
    </div>
    <div class="page-content">
        <div class="block">
            <div class="block-title">Périmètre</div>
            <div id="op2a_preference_perimetre" class="block block-strong tablet-inset">
                <p class="segmented segmented-raised">
                    <button class="button" ws_value="moi">Moi</button>
                    <button class="button" ws_value="antenne">Antenne/pole</button>
                    <button class="button" ws_value="region">Région</button>
                </p>
            </div>
        </div>
    </div>
    <script type="text/javascript" ws_script="page">
    ws_engine.register_page("preference", ws_page.extend(
    {	
        custom_init: function(page, event, params)
        {	
            var self = this;
            
            var perimetre_actuel = op2a_chantiers.get_perimetre();
            $$("#op2a_preference_perimetre .button[ws_value='"+ perimetre_actuel +"']").addClass("button-active");
            
            
            $$("#op2a_preference_perimetre .button").click(function(e)
            {
                var buttons = $$(this).parent().find(".button");
                var value = $$(this).attr("ws_value");
                
                buttons.removeClass("button-active");
                $$("#op2a_preference_perimetre .button[ws_value='"+ value +"']").addClass("button-active");
                
                op2a_chantiers.change_perimetre(value);
            });
        },

    }));
    </script>
</div>