<!DOCTYPE html>
<html class="color-theme-black">
    <head>
        <meta charset="utf-8">
        <!--
        Customize this policy to fit your own app's needs. For more guidance, see:
            https://github.com/apache/cordova-plugin-whitelist/blob/master/README.md#content-security-policy
        Some notes:
            * gap: is required only on iOS (when using UIWebView) and is needed for JS->native communication
            * https://ssl.gstatic.com is required only on Android and is needed for TalkBack to function properly
            * Disables use of inline scripts in order to mitigate risk of XSS vulnerabilities. To change this:
            * Enable inline JS: add 'unsafe-inline' to default-src
        -->
        <meta http-equiv="Content-Security-Policy" content="default-src * 'self' 'unsafe-inline' 'unsafe-eval' data: gap: content:">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui, viewport-fit=cover">
        <meta name="theme-color" content="#007aff">
        <meta name="format-detection" content="telephone=no">
        <meta name="msapplication-tap-highlight" content="no">
        
        <title>OSIRI Rex</title>

        <link rel="stylesheet" href="framework7/css/framework7.bundle.min.css">
        <link rel="stylesheet" href="fonts/f7icons/css/framework7-icons.css">
        <link rel="stylesheet" href="fonts/MaterialIcons/css/MaterialIcons.css">
    
        <!-- Path to FontAwesome -->
        <link rel="stylesheet" href="fonts/fontawesome/css/all.css">

	    <!-- Path to your custom app styles-->
        <!-- <link rel="stylesheet" href="css/icons.css"> -->
        <link rel="stylesheet" href="css/app.css">
        
        <style >
            :root,
            :root.theme-dark,
            :root .theme-dark {
                --f7-bars-bg-color: var(--f7-theme-color);
                --f7-bars-bg-color-rgb: var(--f7-theme-color-rgb);
                --f7-bars-translucent-opacity: 0.9;
                --f7-bars-text-color: #fff;
                --f7-bars-link-color: #fff;
                --f7-navbar-subtitle-text-color: rgba(255,255,255,0.85);
                --f7-bars-border-color: transparent;
                --f7-tabbar-link-active-color: #fff;
                --f7-tabbar-link-inactive-color: rgba(255,255,255,0.54);
                --f7-sheet-border-color: transparent;
                --f7-tabbar-link-active-border-color: #fff;
            }
            .appbar,
            .navbar,
            .toolbar,
            .subnavbar,
            .calendar-header,
            .calendar-footer {
                --f7-touch-ripple-color: var(--f7-touch-ripple-white);
                --f7-link-highlight-color: var(--f7-link-highlight-white);
                --f7-button-text-color: #fff;
                --f7-button-pressed-bg-color: rgba(255,255,255,0.1);
            }
            .navbar-large-transparent {
                --f7-navbar-large-title-text-color: #000;
            
                --r: ${colorThemeRgb[0]};
                --g: ${colorThemeRgb[1]};
                --b: ${colorThemeRgb[2]};
                --progress: var(--f7-navbar-large-collapse-progress);
                --f7-bars-link-color: rgb(
                calc(var(--r) + (255 - var(--r)) * var(--progress)),
                calc(var(--g) + (255 - var(--g)) * var(--progress)),
                calc(var(--b) + (255 - var(--b)) * var(--progress))
                );
            }
            .theme-dark .navbar-large-transparent {
                --f7-navbar-large-title-text-color: #fff;
            }
        </style>
    </head>
    <body>
        <div id="app">
            <!-- Left panel with cover effect-->
            <div class="panel panel-left panel-cover theme-dark panel-init">
                <div class="view">
                    <div class="page">
                        <div class="navbar">
                            <div class="navbar-inner">
                                <div class="title">Menu</div>
                            </div>
                        </div>
                        <div class="page-content">
                            <div class="list">
                                <ul>
                                    <!-- <li>
                                        <a href="/contacts/" class="item-content item-link panel-close">
                                            <div class="item-inner">
                                                <div class="item-title">Contacts</div>
                                            </div>
                                        </a>
                                    </li> -->
                                    <li>
                                        <a id="ws_app_admin_acces" href="#" class="item-content item-link panel-close">
                                            <div class="item-inner">
                                                <div class="item-title">Admin</div>
                                            </div>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="#" class="item-content item-link">
                                            <div class="item-inner" id="menu_disconnect">
                                                <div class="item-title">Deconnexion</div>
                                            </div>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="popup" id="popup_connection">
                <div class="view">
                    <div class="page" data-name="login">
                        <div class="navbar">
                            <div class="navbar-bg"></div>
                            <div class="navbar-inner">
                                <div class="left">
                                    <a href="#" class="link popup-close">
                                        <i class="icon icon-back"></i>
                                    <span class="ios-only">Back</span>
                                    </a>
                                </div>
                                <div class="title">OSIRI Mobile</div>
                            </div>						
                        </div>
                        <div class="page-content">
                            <br>
                            <div class="login-screen-title">Connexion Ã  OSIRI mobile</div>
                            
                            <div class="block-title" style="white-space: normal; text-align: center;">Allez sur la page OSIRI Mobile sur votre ordinateur et scannez le QR Code</div>
                            <div class="block">
                                <div id="connection_qrcode" style="text-align:center;"><img src="./img/qr_code.png"></div>
                                <p><a id="connection_btn" class="button button-big button-fill" style="text-align: center;">Scanner le QR Code sur OSIRI</a></p>
                            </div>
                            
                            <div class="block-title">Ou saisissez vos identifiant / mot de passe :</div>
                            <div class="block" id="connection_login">
                                <form id="connection_login_form">
                                    <div class="list no-hairlines">
                                        <ul>
                                            <li class="item-content item-input">
                                                <div class="item-inner">
                                                    <div class="item-title item-label">Identifiant</div>
                                                    <div class="item-input-wrap">
                                                        <input type="text" name="username" placeholder="Identifiant">
                                                    </div>
                                                </div>
                                            </li>
                                            <li class="item-content item-input">
                                                <div class="item-inner">
                                                    <div class="item-title item-label">Mot de passe</div>
                                                    <div class="item-input-wrap">
                                                        <input type="password" name="password" placeholder="Mot de passe">
                                                    </div>
                                                </div>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="list">
                                        <ul>
                                            <li><input class="button button-big button-fill" type="submit" href="#" value="Se connecter"/></li>
                                        </ul>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Views/Tabs container -->
            <div class="views tabs safe-areas">
                <!-- Tabbar for switching views-tabs -->
                <div class="toolbar toolbar-bottom tabbar-labels">
                    <div class="toolbar-inner">
                        <a href="#view-home" class="tab-link tab-link-active">
                            <i class="icon f7-icons if-not-md">house_fill</i>
                            <i class="icon material-icons if-md">home</i>
                            <span class="tabbar-label">Tableau de bord</span>
                        </a>
                        <!-- <a href="#view-submit-idea" class="tab-link">
                            <i class="icon f7-icons if-not-md">square_list_fill</i>
                            <i class="icon material-icons if-md">view_list</i>
                            <span class="tabbar-label">DÃ©poser idÃ©e</span>
                        </a> -->
                        <a href="#view-my-actions" class="tab-link">
                            <i class="icon f7-icons if-not-md">square_list_fill</i>
                            <i class="icon material-icons if-md">view_list</i>
                            <span class="tabbar-label">Mes Actions</span>
                        </a>
                        <a href="#view-innovations" class="tab-link">
                            <i class="icon f7-icons if-not-md">gear</i>
                            <i class="icon material-icons if-md">settings</i>
                            <span class="tabbar-label">Les innovations</span>
                        </a>
                    </div>
                </div>
                <!-- Your main view/tab, should have "view-main" class. It also has "tab-active" class -->
                <div id="view-home" class="view view-main view-init tab tab-active">
                    <div class="page" data-name="home">
                        <!-- Top Navbar -->
                        <div class="navbar">
                            <div class="navbar-bg"></div>
                            <div class="navbar-inner">
                                <div class="left">
                                    <a href="#" class="link icon-only panel-open" data-panel="left">
                                    <i class="icon f7-icons if-not-md">menu</i>
                                    <i class="icon material-icons if-md">menu</i>
                                    </a>
                                </div>
                                <div class="title sliding">OSIRI</div>
                                <div class="right">
                                    <a class="synchro link icon-only" data-panel="right">
                                        <i class="icon f7-icons ios-only">sync</i>
                                        <i class="icon material-icons md-only">sync</i>
                                    </a>
                                </div>
                            </div>
                        </div>
                        <!-- Scrollable page content-->
                        <div class="page-content">
                            <script id="osiri_rex_action_template" type="text/template7">
                                <div class="list">
                                    <ul>
                                        {{#each rex_actions}}
                                        <li>
                                            <a href="/formulaire_action/" class="item-link item-content">
                                            <div class="item-inner">
                                                <div class="item-title">
                                                {{ nom }}
                                                <div class="item-header">{{ description }}</div>
                                                </div>
                                                <div class="item-after">{{ date }}</div>
                                            </div>
                                            </a>
                                        </li>
                                        {{else}}
                                        <li class="item-content">Aucun REX</li>
                                        <li>
                                            <a href="/formulaire_action/" class="item-link item-content">
                                            <div class="item-inner">
                                                <div class="item-title">
                                                REX Test
                                                <div class="item-header">{{ description }}</div>
                                                </div>
                                                <div class="item-after"></div>
                                            </div>
                                            </a>
                                        </li>
                                        {{/each}}
                                    </ul>
                                </div>
                            </script>
                            <script id="osiri_revu_template" type="text/template7">
                                <div class="list">
                                    <ul>
                                        {{#each revus}}
                                        <li>
                                            <a href="/formulaire_action/" class="item-link item-content">
                                            <div class="item-inner">
                                                <div class="item-title">
                                                {{ nom }}
                                                <div class="item-header">{{ etape }}</div>
                                                </div>
                                                <div class="item-after">{{ phase }}</div>
                                            </div>
                                            </a>
                                        </li>
                                        {{else}}
                                        <li class="item-content">Aucune revu</li>
                                        {{/each}}
                                    </ul>
                                </div>
                            </script>
                            <script id="osiri_mes_actions_template" type="text/template7">
                                <div class="list">
                                    <ul>
                                        {{#each mes_actions}}
                                        <li>
                                            <a href="{{#js_if "this.action == 'prototype_tests_chantiers' || this.action == 'preserie_tests_chantiers'"}}/formulaire_action/{{ phase_chantier }}{{else}}/project/{{ projet }}{{/js_if}}" class="item-link item-content">
                                            <div class="item-inner">
                                                <div class="item-title">
                                                {{ nom }}
                                                <div class="item-header">{{ etape }}</div>
                                                </div>
                                                <div class="item-after">{{ phase }}</div>
                                            </div>
                                            </a>
                                        </li>
                                        {{else}}
                                        <li class="item-content">Aucune action</li>
                                        {{/each}}
                                    </ul>
                                </div>
                            </script>
                            <script id="osiri_mes_projets_template" type="text/template7">
                                <div class="list">
                                    <ul>
                                        {{#each mes_projets}}
                                        <li>
                                            <a href="/project/{{ id }}" class="item-link item-content">
                                            <div class="item-inner">
                                                <div class="item-title">
                                                {{ nom }}
                                                <div class="item-header">{{ etape }}</div>
                                                </div>
                                                <div class="item-after">{{ phase }}</div>
                                            </div>
                                            </a>
                                        </li>
                                        {{else}}
                                        <li class="item-content">Aucun projet</li>
                                        {{/each}}
                                    </ul>
                                </div>
                            </script>
                            <script id="osiri_phase_change_template" type="text/template7">
                                <div class="list">
                                    <ul>
                                        {{#each phase_changes}}
                                        <li>
                                            <a href="/project/{{ projet }}" class="item-link item-content">
                                            <div class="item-inner">
                                                <div class="item-title">
                                                {{ nom }}
                                                <div class="item-header">{{ de }} -> {{ vers }}</div>
                                                </div>
                                                <div class="item-after">{{ date }}</div>
                                            </div>
                                            </a>
                                        </li>
                                        {{else}}
                                        <li class="item-content">Aucun changement de phase</li>
                                        {{/each}}
                                    </ul>
                                </div>
                            </script>
                            <script id="osiri_last_event_template" type="text/template7">
                                <div class="list">
                                    <ul>
                                        {{#each last_events}}
                                        <li>
                                            <a href="/project/{{ projet }}" class="item-link item-content">
                                            <div class="item-inner">
                                                <div class="item-title">
                                                {{ nom }}
                                                <div class="item-header">{{ date }}</div>
                                                </div>
                                                <div class="item-after">{{ event }}</div>
                                            </div>
                                            </a>
                                        </li>
                                        {{else}}
                                        <li class="item-content">Aucun Ã©vÃ©nement</li>
                                        {{/each}}
                                    </ul>
                                </div>
                            </script>
                            <div class="content_every_one_mode" style="margin-top: 20%;">
                                <img src="./img/logo_osiri_300.png" style="display: block; margin: auto; width: 50%;"/>
                                <div class="block block-strong inset">
                                    <p style="font-size: 18px;">
                                        Vous avez un compte OSIRI<br>
                                    </p>
                                    <a class="button  button-fill item-link popup-open" data-popup="#popup_connection">Se connecter</a>
                                </div>
                                <div class="block block-strong inset">
                                    <p style="font-size: 18px;">
                                        Vous n'avez pas de compte<br>
                                    </p>
                                    <div class="list no-hairlines">
                                        <ul>
                                            <li class="item-content item-input">
                                                <div class="item-inner">
                                                    <div class="item-title item-label">Saisissez votre email</div>
                                                    <div class="item-input-wrap">
                                                        <input id="verify_mail" type="email" name="email" placeholder="Email">
                                                    </div>
                                                </div>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="list">
                                        <ul>
                                            <li><input id="send_mail" class="button button-big button-fill" type="submit" href="#" value="Envoyer"/></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="content_connect_mode" style="display: none;">
                                <!-- <div class="card-expandable" style="height: 150px;">
                                    <div class="card-content">
                                        <div class="bg-color-blue" style="height: 150px">
                                        <div id="osiri_rex_todo" class="card-header text-color-white">REX Ã  rÃ©aliser</div>
                                        <a href="#" class="link card-close card-opened-fade-in color-white" style="position: absolute; right: 15px; top: 15px">
                                            <i class="icon f7-icons">multiply_circle_fill</i>
                                        </a>
                                        </div>
                                        <div id="osiri_rex_actions_content" class="card-content-padding">
                                            
                                        </div>
                                    </div>
                                </div>
                                <div class="card-expandable" style="height: 150px;">
                                    <div class="card-content">
                                        <div class="bg-color-green" style="height: 150px">
                                        <div id="osiri_revu_todo" class="card-header text-color-white">Revue Ã  organiser</div>
                                        <a href="#" class="link card-close card-opened-fade-in color-white" style="position: absolute; right: 15px; top: 15px">
                                            <i class="icon f7-icons">multiply_circle_fill</i>
                                        </a>
                                        </div>
                                        <div id="osiri_revu_content" class="card-content-padding">
                                        </div>
                                    </div>
                                </div> -->
                                <div class="card-expandable" style="height: 150px;">
                                    <div class="card-content">
                                        <div class="bg-color-blue" style="height: 150px">
                                        <div id="osiri_rex_todo" class="card-header text-color-white">Mes projets</div>
                                        <a href="#" class="link card-close card-opened-fade-in color-white" style="position: absolute; right: 15px; top: 15px">
                                            <i class="icon f7-icons">multiply_circle_fill</i>
                                        </a>
                                        </div>
                                        <div id="osiri_mes_projets_content" class="card-content-padding">
                                            
                                        </div>
                                    </div>
                                </div>
                                <div class="card-expandable" style="height: 150px;">
                                    <div class="card-content">
                                        <div class="bg-color-green" style="height: 150px">
                                        <div id="osiri_revu_todo" class="card-header text-color-white">Mes actions</div>
                                        <a href="#" class="link card-close card-opened-fade-in color-white" style="position: absolute; right: 15px; top: 15px">
                                            <i class="icon f7-icons">multiply_circle_fill</i>
                                        </a>
                                        </div>
                                        <div id="osiri_mes_actions_content" class="card-content-padding">
                                        </div>
                                    </div>
                                </div>
                                <div class="card-expandable" style="height: 150px;">
                                    <div class="card-content">
                                        <div class="bg-color-orange" style="height: 150px">
                                        <div id="osiri_phase_change_todo" class="card-header text-color-white">Changements de phases (mois passÃ©)</div>
                                        <a href="#" class="link card-close card-opened-fade-in color-white" style="position: absolute; right: 15px; top: 15px">
                                            <i class="icon f7-icons">multiply_circle_fill</i>
                                        </a>
                                        </div>
                                        <div id="osiri_phase_change_content" class="card-content-padding">
                                        </div>
                                    </div>
                                </div>
                                <div class="card-expandable" style="height: 150px;">
                                    <div class="card-content">
                                        <div class="bg-color-yellow" style="height: 150px">
                                        <div id="osiri_last_event_todo" class="card-header text-color-white">Derniers Ã©vÃ©nements (30 derniers jours)</div>
                                        <a href="#" class="link card-close card-opened-fade-in color-white" style="position: absolute; right: 15px; top: 15px">
                                            <i class="icon f7-icons">multiply_circle_fill</i>
                                        </a>
                                        </div>
                                        <div id="osiri_last_event_content" class="card-content-padding">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="content_deconnect_mode" style="display: none; margin-top: 20%;">
                                <img src="./img/logo_osiri_300.png" style="display: block; margin: auto; width: 50%;"/>
                                <div class="block block-strong inset">
                                    <p style="font-size: 18px;">
                                        Vous Ãªtes en mode dÃ©connectÃ©,<br>
                                        vous pouvez dÃ©poser une nouvelle idÃ©e et consulter les innovations.<br><br>
                                    </p>
                                    <div class="block">
                                        <p class="row">
                                            <a  href="#view-submit-idea" class="aaa tab-link col button button-fill color-green">Ajouter une nouvelle idÃ©e</a>
                                        </p>
                                        <p class="row">
                                            <a  href="#view-innovations" class="aaa tab-link col button button-fill color-blue">Liste des innovations</a>
                                        </p>
                                    </div>
                                    <p style="font-size: 18px;">ou bien de se connecter pour avoir accÃ¨s Ã  vos actions</p>
                                    <div class="block">
                                        <p class="row">
                                            <a class="col button button-fill popup-open" data-popup="#popup_connection">Se connecter</a>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Submit idea View -->
                <div id="view-submit-idea" class="view view-init tab">
                <!-- <div id="view-submit-idea" class="view view-init tab" data-view="submit-idea-tab" data-url="/submit_idea_tab/"> -->
                    <!-- Submit idea page will be loaded here dynamically from /submit_idea_tab/ route -->
                </div>
                <!-- My actions View -->
                <div id="view-my-actions" class="view view-init tab">
                    <!-- My actions page will be loaded here dynamically from /my_actions_tab/ route -->
                </div>
                <!-- Innovations View -->
                <div id="view-innovations" class="view view-init tab">
                    <!-- Innovations page will be loaded here dynamically from /innovations_tab/ route -->
                </div>
            </div>
            
        </div>

        <script type="text/javascript" src="cordova.js"></script>

        <!-- Framework7 library -->
        <script type="text/javascript" src="framework7/js/framework7.bundle.min.js"></script>

        <!-- Framework7 library -->
        <script type="text/javascript" src="libs/jquery-3.4.1.js"></script>

        <!-- WS scripts -->
        <script type="text/javascript" src="js/workspace/ws_object.js"></script>
        <script type="text/javascript" src="js/workspace/ws_defines.js"></script>
        <script type="text/javascript" src="js/workspace/ws_engine.js"></script>
        <script type="text/javascript" src="js/workspace/ws_tools.js"></script>
        <script type="text/javascript" src="js/workspace/ws_platform.js"></script>
        <script type="text/javascript" src="js/workspace/ws_storage.js"></script>
        <script type="text/javascript" src="js/workspace/ws_datamodel.js"></script>
        <script type="text/javascript" src="js/workspace/ws_database.js"></script>
        <script type="text/javascript" src="js/workspace/ws_filesystem.js"></script>
        <script type="text/javascript" src="js/workspace/ws_server.js"></script>
        <script type="text/javascript" src="js/workspace/ws_user.js"></script>
        <script type="text/javascript" src="js/workspace/ws_synchronizer.js"></script>
        <script type="text/javascript" src="js/workspace/ws_page.js"></script>
        <script type="text/javascript" src="js/workspace/ws_form.js"></script>
        
        <!-- App scripts -->
        <script type="text/javascript" src="js/app/app_defines.js"></script>
        <script type="text/javascript" src="js/app/app_server.js"></script>
        <script type="text/javascript" src="js/app/app_datamodel.js"></script>
        <script type="text/javascript" src="js/app/app_database.js"></script>
        <script type="text/javascript" src="js/app/app_form.js"></script>
        <script type="text/javascript" src="js/app/app_synchronizer.js"></script>
        <script type="text/javascript" src="js/app/app_engine.js"></script>

        <!-- Custom scripts -->
        <script type="text/javascript" src="js/osiri/osiri_actions.js"></script>
        <script type="text/javascript" src="js/osiri/osiri_rexs.js"></script>
        <script type="text/javascript" src="js/osiri/osiri_projects.js"></script>
        <script type="text/javascript" src="js/osiri/osiri_photos.js"></script>
        
        <!-- App routes -->
        <script src="js/routes.js"></script>
        <!-- App scripts -->
        <script src="js/app.js"></script>
    </body>
</html>